extends layout

block style
	style(type='text/css').
		body {padding-top:53px; background-color:#e7e7e7;}
		.menu {word-break: keep-all; max-width: 1200px;}
		#service-brand {text-align:center; background-color:#ffffff; border-width:0px; border-style:solid; border-color:#ffa800;height:50px; padding-top:7px; border-bottom-width:3px;}
		#service-contents {text-align:center;background-color:#ffffff;border-width:0px; border-style:solid; border-color:#ffffff; border-left-width:0px;height:50px;padding-top:7px;border-bottom-width:3px;}
		#service-event {text-align:center;background-color:#ffffff;border-width:0px; border-style:solid; border-color:#ffffff; border-left-width:0px;height:50px;border-bottom-width:3px; padding-top:7px;}
		#service-discount {text-align:center;background-color:#ffffff;border-width:0px; border-style:solid; border-color:#ffffff;border-left-width:0px;height:50px;border-bottom-width:3px; padding-top:7px;}
		#service-brand h6, #service-contents h6, #service-event h6, #service-discount h6 {font-size:100%; font-family: nanumbarungothicbold;}
		#brand-list { background-color:#ffffff;height:55px; border-style:solid;border-width:0px; border-bottom-width:1px; border-color:#bbbbbb;}
		#brand-list h6 {font-size:110%; } 
		#brand-con {display:none; padding-top: 47px; max-width: 1200px;}
		#contents-con {display:none; padding: 5px; padding-top: 53px; background-color: #F6F6F6; max-width: 1200px;}
		#event-con {display:none; backgroung-color:#f6f6f6;}
		#discount-con {display:none; padding: 5px; padding-top: 53px; background-color: #F6F6F6;}
		.like {width: 85px; font-size:90%; border-style:solid; border-width:1px; border-radius:15px; text-align:center; border-color:#bbbbbb; background-color:#ffa800; padding-top: 3px; padding-bottom: 3px;}
		.non_activated {width: 85px; font-size:90%; border-style:solid; border-width:1px; border-radius:15px; text-align:center; border-color:#bbbbbb; background-color:#ffffff; padding-top: 3px; padding-bottom: 3px;}
		#mini-list {padding: 5px; padding-top: 53px; background-color:#F6F6F6; max-width: 1200px;}
		#photo-list {padding: 5px; padding-top: 100px; background-color:#F6F6F6; max-width: 1200px;}
		.discount-box {background-color: #FFFFFF;background-clip: content-box;padding: 5px;webkit-flex: 1;-ms-flex: 1;flex: 1; }
		#conEnroll {position:fixed; background-color:#f6f6f6; padding: 10px; top:100px; left:0px; right:0px;}
		#conEnroll button {width:100%;}
		#titleBlock {background-color:#ffffff; width:100%; }
		#imgBlock {background-color:#ffffff; width:100%; padding-left: 0; padding-right: 0;}
		#contImgBlock {background-color:#ffffff; width:100%; padding-bottom: 85px; padding-left: 0px; padding-right: 0px; }
		#likeBlock {text-align:center;}
		#likeBlock h6 {margin: 0;}
		.content-box {background-color: #FFFFFF;
		background-clip: content-box;padding: 5px;
		webkit-flex: 1;
		-ms-flex: 1;
		flex: 1; }
		.community-box {background-color: #FFFFFF; overflow: auto; float: left;
		background-clip: content-box; padding: 5px; width: 100%; position: relative;}
		.community-box:after {
				content: "";
				position: absolute;
				top: 5px;
				left: 5px;
				right: 5px;
				bottom: 5px;
				display: block;
				border: 1px solid #c3c3c3;
				cursor: pointer;
		}
		.no-margin {margin: 0;}
		.community-row {width: 100%; margin: 0;}
		.community-col {width: 50%; margin: 0; float: left; overflow: auto; padding-bottom: 5px;}
		.content-box:after {
				content: "";
				position: absolute;
				top: 5px;
				left: 5px;
				right: 5px;
				bottom: 5px;
				display: block;
				border: 1px solid #c3c3c3;
				cursor: pointer;
		}
		.content-row {margin: 0px;
		display: -ms-flexbox;
		display: -webkit-flex;
		display: flex; }
		.discount-row {margin: 0px;
		display: -ms-flexbox;
		display: -webkit-flex;
		display: flex; }
		.discount-box:after {
				content: "";
				position: absolute;
				top: 5px;
				left: 5px;
				right: 5px;
				bottom: 5px;
				display: block;
				border: 1px solid #c3c3c3;
				cursor: pointer;
		}
		.email {float: right;}
		.email h6 {float: right;}
		.email img {float: right; padding-top: 6px; margin-right: 3px;}
		.tab-bar {position: fixed; top: 50px; z-index: 1;}
		.discount-box h5 {font-size: 200%;}
		.discount-box h6 {font-size: 150%; float: right;}
		.no-padding {padding: 0;}
		.width-100-no-margin {width: 100%; margin: 0;}
		#likeBlock h6 {margin-top: 0;}
		.container-fluid {background-color: #f6f6f6;}
		#preview-brand {display:block;}
		#preview-list { }
		#preview-head {height:35px; background-color:#ffffff; width:100%; border-style:solid; border-width:2px; border-color:#e7e7e7;}
		#preview-body {background-color:#ffffff; width:100%; border-style:solid; border-width:2px; border-color:#e7e7e7; border-top-width:0px;}
		#preview-tail {padding: 0; border: 2px solid #e7e7e7; border-top: 0; background: #fff; margin-bottom: 5px;}
		.attr { float:left; border-style:solid; border-width:2px; border-color:#990085; border-radius:10%;font-size:70%; font-weight:bold; color:#990085;margin-right:3px;}
		.comment { background-color:#d5d5d5;}
		table {width:100%;}
		#brand-preview {text-align:center;background-color:#ffffff;border-width:0px; border-style:solid; border-color:#ffffff; border-left-width:0px;height:50px;padding-top:7px;border-bottom-width:3px;}
		#preview-tab {width: 204px; height: 29px; border-radius: 5px; border: 2px solid #8200ff; background-color:#fff; cursor: pointer; margin-bottom: 5px;}
		#mini-tab, #photo-tab {width: 100px; height: 25px; float: left; padding: 3px; text-align: center;}
		#mini-tab {background-color: #8200ff; color: #fff;}
		#photo-tab {background-color: #fff; color: #8200ff;}
	style.
		@media only screen and (max-width: 500px) {.discount-box h5 {font-size: 130%;} .discount-box h6 {font-size: 100%;}}
		@media only screen and (max-width: 350px) {.email h6 {font-size:80%;}}

block content
	center
		.col-xs-12.tab-bar
			.row.menu
				#service-brand.col-xs-3(onclick="change(1);")
					h6 브랜드
				#service-contents.col-xs-3(onclick="change(2);")
					h6 컨텐츠
				#service-event.col-xs-3(onclick="change(3);")
					h6 프리뷰
				#service-discount.col-xs-3(onclick="change(4);")
					h6 커머스
		#brand-con
			if (brand)
				each val in brand
					#brand-list.col-xs-12
						.row(style='height: 55px;')
							.col-xs-2(style='height: 100%; min-width: 75px !important;' onclick="location.href='/brand?brandNo=#{val.brandNo}';")
								span(style='display: inline-block; height: 100%; vertical-align: middle;')
								img(style='width: 45px; height: auto; vertical-align: middle;' src="./images/brand_logo/#{val.image}")
							.col-xs-6(style='height: 100%; width: auto;' onclick="location.href='/brand?brandNo=#{val.brandNo}';")
								span(style='display: inline-block; height: 100%; vertical-align: middle;')
								h6(style='display: inline-block; margin: 0; vertical-align: middle; line-height: 100%;')= val.brandName
							if (loggedIn)
								.col-xs-4(style='height: 100%; min-width: 115px !important; float: right; position: absolute; top: 0; right: 0;')
									center(style='height: 100%;')
										span(style='display: inline-block; height: 100%; vertical-align: middle;')
										p.non_activated(style='display: inline-block; height: 26px; margin: 0; vertical-align: middle; line-height: 20px;' id="brand#{val.brandNo}" onclick="like(#{val.brandNo});") 즐겨찾기
		#contents-con
			span.community-row
				span.community-col
					each val, index in content
						- if (index % 2 == 0)
							span.community-box(onClick="location.href='/content_box?contentNo=#{content[index].contentNo}';")
								#imgBlock.col-xs-12
									img(src='./images/contents/#{content[index].image}/0' width="100%;")
								#contTitleBlock.col-xs-12
									h6= content[index].title
								#likeBlock
									.row.width-100-no-margin
										.col-xs-3.no-padding
											img(src=(content[index].user_like ? './images/heart_on.png' : './images/heart.png') width='15px;')
											h6= content[index].like
										.col-xs-3.no-padding
											img(src='./images/speech.png' width='15px;')
											h6= content[index].count
										.col-xs-3.no-padding
											img(src='./images/clip_on.png' width='15px;')
											h6= content[index].clip
										.col-xs-3.no-padding
											img(src='./images/view.png' width='15px;')
											h6= content[index].view
				span.community-col
					each val, index in content
						- if (index % 2 == 1)
							span.community-box(onClick="location.href='/content_box?contentNo=#{content[index].contentNo}';")
								#imgBlock.col-xs-12
									img(src='./images/contents/#{content[index].image}/0' width="100%;")
								#contTitleBlock.col-xs-12
									h6= content[index].title
								#likeBlock
									.row.width-100-no-margin
										.col-xs-3.no-padding
											img(src=(content[index].user_like ? './images/heart_on.png' : './images/heart.png') width='15px;')
											h6= content[index].like
										.col-xs-3.no-padding
											img(src='./images/speech.png' width='15px;')
											h6= content[index].count
										.col-xs-3.no-padding
											img(src='./images/clip_on.png' width='15px;')
											h6= content[index].clip
										.col-xs-3.no-padding
											img(src='./images/view.png' width='15px;')
											h6= content[index].view
		#event-con
			#photo-list(style="display:none;")
				span.community-row
					span.community-col
						each val, index in community
							- if (index % 2 == 0)
								span.community-box(onClick="location.href='/community_box?communityNo=#{community[index].communityNo}';")
									#titleBlock.col-xs-12
										.row
											.col-xs-2
												img(src='./images/brand_logo/#{community[index].brandImageName}' width='40px;')
											.hidden-xs.col-sm-4
												h6= community[index].brandName
											.col-xs-9.col-sm-6.email
												h6= community[index].email
												img(src='./images/user.png' width="15px")
									#imgBlock.col-xs-12
										img(src='./images/community/#{community[index].image}' width="100%;")
									#likeBlock
										.row.width-100-no-margin
											.col-xs-4
												img(src=(community[index].user_like ? './images/heart_on.png' : './images/heart.png') width='15px;')
												h6= community[index].like
											.col-xs-4
												img(src='./images/speech.png' width='15px;')
												h6= community[index].count
											.col-xs-4
												img(src='./images/view.png' width='15px;')
												h6= community[index].view
					span.community-col
						each val, index in community
							- if (index % 2 == 1)
								span.community-box(onClick="location.href='/community_box?communityNo=#{community[index].communityNo}';")
									#titleBlock.col-xs-12
										.row
											.col-xs-2
												img(src='./images/brand_logo/#{community[index].brandImageName}' width='40px;')
											.hidden-xs.col-sm-4
												h6= community[index].brandName
											.col-xs-9.col-sm-6.email
												h6= community[index].email
												img(src='./images/user.png' width="15px")
									#imgBlock.col-xs-12
										img(src='./images/community/#{community[index].image}' width="100%;")
									#likeBlock
										.row.width-100-no-margin
											.col-xs-4
												img(src=(community[index].user_like ? './images/heart_on.png' : './images/heart.png') width='15px;')
												h6= community[index].like
											.col-xs-4
												img(src='./images/speech.png' width='15px;')
												h6= community[index].count
											.col-xs-4
												img(src='./images/view.png' width='15px;')
												h6= community[index].view
				#conEnroll.col-xs-12
					button.btn.btn-warning(onClick="location.href='/community_post';" style="max-width: 1200px;") 게시글 올리기
			#mini-list
				#preview-tab
					#mini-tab 미니
					#photo-tab 포토
				#event-list
					#preview-head.col-xs-12
						.row
							.col-xs-2
								img(src='./images/brand_logo/nike.png' style="width: 50px; max-height: 35px;")
							.col-xs-7(style='text-align:left;')
								h6 나이키
							.col-xs-3(style='text-align:right;')
								h6 신발
					#preview-body.col-xs-12
						#image(style='float:left;')
							img(src='./images/brand_logo/nike.png' width='60px;' style='margin-left:-10px; padding-top:10px;')
						#bodylanguage(style='float:left; width:80%;')
							table(style='margin-left:8px;')
								tr
									td(style='width:50%;') 나이키 에어맥스 
									td 55000
								tr.comment
									td coc**
									td 남자 180 굵은편
							table(style='margin-left:8px;')
								tr
									td(style="width: 45px;") 장점 
									td(style='margin-bottom:0px;') ~~~~~
								tr
									td 단점
									td(style='margin-bottom:0px;') ~~~~~
								tr
									td 코멘트
									td(style='margin-bottom:0px;') ~~~~~
					#preview-tail.col-xs-12
						.col-xs-9(style="text-align: left;")
							img(src='./images/heart.png' style='display: inline; width: 15px;')
							h6(style='display: inline; margin-right: 10px;') 1000
							img(src='./images/speech.png' style='display: inline; width: 15px;')
							h6(style='display: inline; margin-right: 10px;') 1000
							img(src='./images/clip.png' style='display: inline; width: 15px;')
							h6(style='display: inline;') 1000
						.col-xs-3(style="text-align: right;")
							img(src='./images/view.png' style='display: inline; width: 15px;')
							h6(style='display: inline;') 1000
		#discount-con.col-xs-12
			h2(style="word-break: keep-all; text-align: center;") 커머스 서비스는 준비중입니다
		//- each val, index in product
		//- 	- if (index % 2 == 0) {
		//- 	.row.discount-row
		//- 		.discount-box.col-xs-6(onClick="location.href='/detail?productNo=#{product[index].productNo}';")
		//- 			img.discount(src="./images/product_image/#{product[index].productNo}/main.jpg" width='100%;')
		//- 			h5= product[index].productName
		//- 			h6.price= product[index].productPrice
		//- 		- if (index+1 < product.length) {
		//- 			.discount-box.col-xs-6(onClick="location.href='/detail?productNo=#{product[index].productNo}';")
		//- 				img.discount(src="./images/product_image/#{product[index+1].productNo}/main.jpg" width='100%;')
		//- 				h5= product[index+1].productName
		//- 				h6.price= product[index+1].productPrice
		//- 		- }
		//- 	- }


block script_content
	script.
		var count=1;
		function change(num){
			var copy_count=count;
			var before_active;
			var before_tab;
			var after_active;
			var after_tab;
			count=num;
			location.hash = "#"+num;
			if(copy_count == 1){
				before_active = "brand-con"
				before_tab = "service-brand"
				document.getElementById(before_active).style.display="none";
				document.getElementById(before_tab).style.borderColor="#ffffff";
			}
			else if(copy_count == 2){
				before_active = "contents-con"
				before_tab = "service-contents"
				document.getElementById(before_active).style.display="none";
				document.getElementById(before_tab).style.borderColor="#ffffff";
			}
			else if(copy_count == 3){
				before_active = "event-con"
				before_tab = "service-event"
				document.getElementById(before_active).style.display="none";
				document.getElementById(before_tab).style.borderColor="#ffffff";
			}
			else{
				before_active = "discount-con"
				before_tab = "service-discount"
				document.getElementById(before_active).style.display="none";
				document.getElementById(before_tab).style.borderColor="#ffffff";
			}
			if(count == 1){
				after_active = "brand-con"
				after_tab = "service-brand"
				document.getElementById(after_active).style.display="block";
				document.getElementById(after_tab).style.borderColor="#ffa800";
			}
			else if(count == 2){
				after_active = "contents-con"
				after_tab = "service-contents"
				document.getElementById(after_active).style.display="block";
				document.getElementById(after_tab).style.borderColor="#ffa800";
			}
			else if(count == 3){
				after_active = "event-con"
				after_tab = "service-event"
				document.getElementById(after_active).style.display="block";
				document.getElementById(after_tab).style.borderColor="#ffa800";
			}
			else{
				after_active = "discount-con"
				after_tab = "service-discount"
				document.getElementById(after_active).style.display="block";
				document.getElementById(after_tab).style.borderColor="#ffa800";
			}
		}
		function like(num){
			var like_id=document.getElementById("brand"+num);
			if(like_id.className == "like"){
				$.ajax({
					type: "POST",
					url: '/brand_like',
					data: {command: "delete", brandNo: num},
					success: function() {
						like_id.className = "non_activated";
					}
				});
			}
			else{
			 $.ajax({
					type: "POST",
					url: '/brand_like',
					data: {command: "insert", brandNo: num},
					success: function() {
						like_id.className = "like";
					}
				});
			}
		}
		
		(function setTab() {
			if (location.hash)
				change(location.hash.charAt(1));
			else
				change(1);
		})();
		function comma() {
			$("h6.price").each(function() {
				$(this).html(function(index, currentcontent) {
					return currentcontent.toString().replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,')+" 원";
				}); 
			});
		}
		$(document).ready(comma);
	if (loggedIn)
		script.
			function setInitialLike() {
					var brandLike = !{JSON.stringify(brandLike)};
					for (var val in brandLike) {
						$("#brand"+brandLike[val]['brandNo']).attr('class', 'like');
					}
			}
			$(document).ready(setInitialLike);